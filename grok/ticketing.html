<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ticketing System - HowlWare</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
  </head>
  <body class="bg-light">
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
      <div class="container">
        <a class="navbar-brand" href="index.html">HowlWare</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link" href="dashboard.html">Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="ticketing.html">Ticketing System</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="reports.html">Reports</a>
            </li>
          </ul>
          <div class="d-flex">
            <a href="profile.html" class="btn btn-outline-light me-2">Profile</a>
            <a href="logout.html" class="btn btn-outline-light">Logout</a>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="container my-5">
      <h2 class="mb-4 text-center">Ticketing System Dashboard</h2>

      <!-- Ticket Overview Cards -->
      <div class="row mb-4">
        <div class="col-md-3">
          <div class="card text-white bg-info mb-3">
            <div class="card-body">
              <h5 class="card-title">Total Tickets</h5>
              <p class="card-text display-4" id="total-tickets">0</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-white bg-success mb-3">
            <div class="card-body">
              <h5 class="card-title">Open Tickets</h5>
              <p class="card-text display-4" id="open-tickets">0</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-white bg-warning mb-3">
            <div class="card-body">
              <h5 class="card-title">Pending Tickets</h5>
              <p class="card-text display-4" id="pending-tickets">0</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-white bg-danger mb-3">
            <div class="card-body">
              <h5 class="card-title">Closed Tickets</h5>
              <p class="card-text display-4" id="closed-tickets">0</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Ticket Management Table -->
      <div class="table-responsive">
        <table class="table table-bordered table-hover">
          <thead class="table-primary">
            <tr>
              <th scope="col">Ticket ID</th>
              <th scope="col">Subject</th>
              <th scope="col">Priority</th>
              <th scope="col">Status</th>
              <th scope="col">Created By</th>
              <th scope="col">Created At</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody id="ticket-list">
            <!-- Ticket rows will be injected here by JavaScript -->
          </tbody>
        </table>
      </div>

      <!-- Add New Ticket Button -->
      <div class="d-flex justify-content-end">
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addTicketModal">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zM8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0z"/>
            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
          </svg>
          Add New Ticket
        </button>
      </div>

      <!-- Add Ticket Modal -->
      <div class="modal fade" id="addTicketModal" tabindex="-1" aria-labelledby="addTicketModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <form id="add-ticket-form">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="addTicketModalLabel">Add New Ticket</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                <div class="mb-3">
                  <label for="ticket-subject" class="form-label">Subject</label>
                  <input type="text" class="form-control" id="ticket-subject" required>
                </div>
                <div class="mb-3">
                  <label for="ticket-description" class="form-label">Description</label>
                  <textarea class="form-control" id="ticket-description" rows="3" required></textarea>
                </div>
                <div class="mb-3">
                  <label for="ticket-priority" class="form-label">Priority</label>
                  <select class="form-select" id="ticket-priority" required>
                    <option value="Low">Low</option>
                    <option value="Medium" selected>Medium</option>
                    <option value="High">High</option>
                  </select>
                </div>
                <div class="mb-3">
                  <label for="ticket-created-by" class="form-label">Created By</label>
                  <input type="text" class="form-control" id="ticket-created-by" required>
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Add Ticket</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white pt-4">
      <div class="container">
        <div class="row">
          <!-- About Section -->
          <div class="col-md-4">
            <h5>About HowlWare</h5>
            <p>
              HowlWare specializes in advanced cybersecurity solutions, providing reliable and innovative tools to protect your digital assets.
            </p>
          </div>
          <!-- Quick Links -->
          <div class="col-md-4">
            <h5>Quick Links</h5>
            <ul class="list-unstyled">
              <li><a href="index.html" class="text-white text-decoration-none">Home</a></li>
              <li><a href="About.html" class="text-white text-decoration-none">About</a></li>
              <li><a href="support.html" class="text-white text-decoration-none">Support</a></li>
              <li><a href="contact.html" class="text-white text-decoration-none">Contact</a></li>
            </ul>
          </div>
          <!-- Contact Information -->
          <div class="col-md-4">
            <h5>Contact Us</h5>
            <p>
              123 Cybersecurity Ave.<br>
              Tech City, TC 12345<br>
              Email: <a href="mailto:info@howlware.com" class="text-white text-decoration-none">info@howlware.com</a><br>
              Phone: (123) 456-7890
            </p>
          </div>
        </div>
        <hr class="bg-secondary">
        <div class="text-center pb-3">
          &copy; 2024 HowlWare. All rights reserved.
        </div>
      </div>
    </footer>

    <!-- Ticket Management JavaScript -->
    <script>
      // Sample Data (In a real application, data would be fetched from a server)
      let tickets = [
        {
          id: 1,
          subject: "Cannot access VPN",
          priority: "High",
          status: "Open",
          createdBy: "AdminUser",
          createdAt: "2024-04-01 10:30 AM"
        },
        {
          id: 2,
          subject: "Software installation request",
          priority: "Medium",
          status: "Pending",
          createdBy: "JohnDoe",
          createdAt: "2024-04-02 02:15 PM"
        },
        // Add more sample tickets as needed
      ];

      // Function to render ticket overview
      function renderOverview() {
        const total = tickets.length;
        const open = tickets.filter(ticket => ticket.status === "Open").length;
        const pending = tickets.filter(ticket => ticket.status === "Pending").length;
        const closed = tickets.filter(ticket => ticket.status === "Closed").length;

        document.getElementById('total-tickets').textContent = total;
        document.getElementById('open-tickets').textContent = open;
        document.getElementById('pending-tickets').textContent = pending;
        document.getElementById('closed-tickets').textContent = closed;
      }

      // Function to render ticket list
      function renderTicketList() {
        const ticketList = document.getElementById('ticket-list');
        ticketList.innerHTML = ''; // Clear existing rows

        tickets.forEach(ticket => {
          const tr = document.createElement('tr');

          tr.innerHTML = `
            <td>${ticket.id}</td>
            <td>${ticket.subject}</td>
            <td>${ticket.priority}</td>
            <td>${ticket.status}</td>
            <td>${ticket.createdBy}</td>
            <td>${ticket.createdAt}</td>
            <td>
              <button class="btn btn-sm btn-info me-1" onclick="viewTicket(${ticket.id})">View</button>
              <button class="btn btn-sm btn-warning me-1" onclick="editTicket(${ticket.id})">Edit</button>
              <button class="btn btn-sm btn-danger" onclick="deleteTicket(${ticket.id})">Delete</button>
            </td>
          `;

          ticketList.appendChild(tr);
        });
      }

      // Function to handle adding a new ticket
      function addTicket(event) {
        event.preventDefault();
        const subject = document.getElementById('ticket-subject').value.trim();
        const description = document.getElementById('ticket-description').value.trim();
        const priority = document.getElementById('ticket-priority').value;
        const createdBy = document.getElementById('ticket-created-by').value.trim();
        const createdAt = new Date().toLocaleString();

        if (subject && description && createdBy) {
          const newTicket = {
            id: tickets.length > 0 ? tickets[tickets.length - 1].id + 1 : 1,
            subject,
            priority,
            status: "Open",
            createdBy,
            createdAt
          };
          tickets.push(newTicket);
          renderOverview();
          renderTicketList();
          document.getElementById('add-ticket-form').reset();
          // Close modal
          const addTicketModal = bootstrap.Modal.getInstance(document.getElementById('addTicketModal'));
          addTicketModal.hide();
        } else {
          alert("Please fill in all required fields.");
        }
      }

      // Function to view ticket details
      function viewTicket(id) {
        const ticket = tickets.find(t => t.id === id);
        if (ticket) {
          alert(`Ticket ID: ${ticket.id}\nSubject: ${ticket.subject}\nPriority: ${ticket.priority}\nStatus: ${ticket.status}\nCreated By: ${ticket.createdBy}\nCreated At: ${ticket.createdAt}`);
        }
      }

      // Function to edit a ticket
      function editTicket(id) {
        const ticket = tickets.find(t => t.id === id);
        if (ticket) {
          const newStatus = prompt("Enter new status (Open, Pending, Closed):", ticket.status);
          if (newStatus && ["Open", "Pending", "Closed"].includes(newStatus)) {
            ticket.status = newStatus;
            renderOverview();
            renderTicketList();
          } else {
            alert("Invalid status entered.");
          }
        }
      }

      // Function to delete a ticket
      function deleteTicket(id) {
        if (confirm("Are you sure you want to delete this ticket?")) {
          tickets = tickets.filter(t => t.id !== id);
          renderOverview();
          renderTicketList();
        }
      }

      // Initialize the dashboard
      document.addEventListener('DOMContentLoaded', () => {
        renderOverview();
        renderTicketList();
        document.getElementById('add-ticket-form').addEventListener('submit', addTicket);
      });
    </script>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  </body>
</html>
